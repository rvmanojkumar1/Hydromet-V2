Dygraph.Export={};Dygraph.Export.DEFAULT_ATTRS={backgroundColor:"transparent",titleFont:"bold 18px serif",titleFontColor:"black",axisLabelFont:"bold 14px serif",axisLabelFontColor:"black",labelFont:"normal 12px serif",labelFontColor:"black",legendFont:"bold 12px serif",legendFontColor:"black",vLabelLeft:20,legendHeight:20,legendMargin:20,lineHeight:30,maxlabelsWidth:0,labelTopMargin:35,magicNumbertop:8};Dygraph.Export.isSupported=function(){try{var a=document.createElement("canvas");var b=a.getContext("2d");return(!!a.toDataURL&&!!b.fillText)}catch(c){}return false};Dygraph.Export.asPNG=function(c,a,d){var b=Dygraph.Export.asCanvas(c,d);a.src=b.toDataURL()};Dygraph.Export.asCanvas=function(c,d){var b={},a=Dygraph.createCanvas();Dygraph.update(b,Dygraph.Export.DEFAULT_ATTRS);Dygraph.update(b,d);a.width=c.width_;a.height=c.height_+b.legendHeight;Dygraph.Export.drawPlot(a,c,b);Dygraph.Export.drawLegend(a,c,b);return a};Dygraph.Export.drawPlot=function(c,b,k){var j=c.getContext("2d");j.fillStyle=k.backgroundColor;j.fillRect(0,0,c.width,c.height);var h=b.hidden_;var d=0;j.drawImage(h,0,0);var a=Dygraph.Export.getPlugin(b,"Axes Plugin");if(a){var f=a.plugin;for(d=0;d<f.ylabels_.length;d++){Dygraph.Export.putLabel(j,f.ylabels_[d],k,k.labelFont,k.labelFontColor)}for(d=0;d<f.xlabels_.length;d++){Dygraph.Export.putLabel(j,f.xlabels_[d],k,k.labelFont,k.labelFontColor)}}var e=Dygraph.Export.getPlugin(b,"ChartLabels Plugin");if(e){var g=e.plugin;Dygraph.Export.putLabel(j,g.title_div_,k,k.titleFont,k.titleFontColor);Dygraph.Export.putLabel(j,g.xlabel_div_,k,k.axisLabelFont,k.axisLabelFontColor);Dygraph.Export.putVerticalLabelY1(j,g.ylabel_div_,k,k.axisLabelFont,k.axisLabelFontColor,"center");Dygraph.Export.putVerticalLabelY2(j,g.y2label_div_,k,k.axisLabelFont,k.axisLabelFontColor,"center")}for(d=0;d<b.layout_.annotations.length;d++){Dygraph.Export.putLabelAnn(j,b.layout_.annotations[d],k,k.labelFont,k.labelColor)}};Dygraph.Export.putLabel=function(j,g,k,c,e){if(!g||!g.style){return}var f=parseInt(g.style.top,10);var d=parseInt(g.style.left,10);if(!g.style.top.length){var a=parseInt(g.style.bottom,10);var h=parseInt(g.style.height,10);f=j.canvas.height-k.legendHeight-a-h}f=f+k.magicNumbertop;var b=parseInt(g.style.width,10);switch(g.style.textAlign){case"center":d=d+Math.ceil(b/2);break;case"right":d=d+b;break}Dygraph.Export.putText(j,d,f,g,c,e)};Dygraph.Export.putVerticalLabelY1=function(j,g,k,b,d,a){if(!g){return}var e=parseInt(g.style.top,10);var c=parseInt(g.style.left,10)+parseInt(g.style.width,10)/2;var h=g.innerText||g.textContent;if(!c){c=k.vLabelLeft}if(a=="center"){var f=j.measureText(h);e=Math.ceil((j.canvas.height-f.width)/2+f.width)}j.save();j.translate(0,j.canvas.height);j.rotate(-Math.PI/2);j.fillStyle=d;j.font=b;j.textAlign=a;j.fillText(h,e,c);j.restore()};Dygraph.Export.putVerticalLabelY2=function(h,e,j,b,c,a){if(!e){return}var d=parseInt(e.style.top,10);var f=parseInt(e.style.right,10)+parseInt(e.style.width,10)*2;var g=e.innerText||e.textContent;if(a=="center"){d=Math.ceil(h.canvas.height/2)}h.save();h.translate(parseInt(e.style.width,10),0);h.rotate(Math.PI/2);h.fillStyle=c;h.font=b;h.textAlign=a;h.fillText(g,d,f-h.canvas.width);h.restore()};Dygraph.Export.putText=function(a,f,e,h,c,b){var d=h.style.textAlign||"left";var g=h.innerText||h.textContent;a.fillStyle=b;a.font=c;a.textAlign=d;a.textBaseline="middle";a.fillText(g,f,e)};Dygraph.Export.drawLegend=function(e,d,p){var n=e.getContext("2d");var f=10;var l=5;var a=d.getColors();var j=d.attr_("labels").slice(1);var k=0;var h;for(h=0;h<j.length;h++){k=k+n.measureText("- "+j[h]).width+l}var o=Math.floor((e.width-k)/2);var m=e.height-p.legendHeight+f;var c=d.attr_("visibility");n.font=p.legendFont;n.textAlign="left";n.textBaseline="middle";var b=0;for(h=0;h<j.length;h++){if(c[h]){var g="- "+j[h];n.fillStyle=a[b];b++;n.fillText(g,o,m);o=o+n.measureText(g).width+l}}};Dygraph.Export.getPlugin=function(b,a){for(i=0;i<b.plugins_.length;i++){if(b.plugins_[i].plugin.toString()==a){return b.plugins_[i]}}return null};